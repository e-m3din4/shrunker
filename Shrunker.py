import argparse
import requests

# Print Banner
print('')
print('     ██████████████████████████  ▀██████████████████████████████████████████████████      ')
print('     ██████████████████████████ ║ ▀█████████████████████████████████████████████████      ')
print('     ██████████████████████████ ▓▓ ▀████████  ,█████████████████████████████████████      ')
print('     ██████████████████████████ ▓▐▓ ▀█████▀ ▓ ▐█████████████████████████████████████      ')
print('     ██████████████████████████ ╟ ▓▓ ████ ┌▓▓ ██████████████████████████████████████      ')
print('     ██████████████████   ▀████ I▓ ▓æ ██ J╣Ñ ▐██████████████████████████████████████      ')
print('     ███████████████████ ╙▓─  █ └▓ ▓▓ ▐ /╜eΓ ███████████████████████████████████████      ')
print('     ████████████████████  ▓▓▓,  ▓▓ ÑÆ ,H Ñ ████████████████████████████████████████      ')
print('     █████████████████████▄ + ▓▓┐ D fφ ╫┌╫ ▄████████████████████████████████████████      ')
print('     ███████████████████████  ┐ ▓@ ∞ ╫  ▒  █████████████████████████████████████████      ')
print('     ████████████████████████▄ ╙╖ ╣  [ J    > ~   ▀█████████████████████████████████      ')
print('     ██████████████████▀▀ `  ╓╓⌐┐  └     `     ¼▒▒┐  ▀██████████████████████████████      ')
print('     ██████████████▀ .;[@╫╢╢.∞▒▒▒.⌐┐ ∩∩  ░`     ╞░░▒H  █████████████████████████████      ')
print('     ████████████ ┌▓╫╫╫Ö╝╫@╫╢ ª~,░ `░ª░▒ ░░░ ▒   u░æ░▒ ▐████████████████████████████      ')
print('     ████████████ ├╢╣╢╢@╢╫╫╫╫╫.▒░░░ ▒░░░░ `░,░,   ▒▒└`▄ ▀███████████████████████████      ')
print('     ████████████▌ ╫╢╫╢@@╫╫╫╫╢╫ ░░ ▒░`░   ░   ▒░   -███▌ ███████████████████████████      ')
print('     █████████████ ▓╫╫╫╫`▄▄▄▄▄▄▄  ╜░░▒.,     ░  `-██  █Γ▐███████████████████████████      ')
print('     █████████████ └╫╫╫╢ ██████████▄ ─  . . `   ██████▀ ████████████████████████████      ')
print('     ██████████████ ╢╣╫Ñ ▀█████ ▄▐████    `    █████▀   ████████████████████████████      ')
print('     ██████████████ \╗Ö╙▒ ▀████████████ ∩ ²ª ∩      ⁿº ▐████████████▀  ,  ` ▀▀██████      ')
print('     ███████████████ Ñ▒@╜╢1┌Z▀▀███▀▀▀      ▄  ∩╖  ` ╫@ ▐███████████ ┌╢ÑÑD¡,▓ &  ████      ')
print('     ███████████████▄`▒&╫╢░▒╫╝*=```┌¬ ∩  ∩▐██       jM ⁿ██████████┘,@╫M    ,    ████      ')
print('     ████████████████ \▒╫▒▒¥▒╖  ∩ ⌐ >∩.~~ ⁿⁿ∩░░,     ╚  ▄█████████ ╢╫╝ ╚ %┐║ ╫ ,▐███      ')
print('     █████████████████ ½▒║@║╥╣Ñ▒░≥          ∞╝`   ▄▄█▌ ██████████ J▀Ñ ╚╚= µ╞┐╟╡[ ███      ')
print('     ██████████████████ ╜╢▓╫╢╫╫@▒j ▒ º` `-▄▄████Γ▄▀██ ▐█████████▀.▀▒╫ ▒  ¥H⌡╡[▓└L▐██      ')
print('     ███████████████████ ╢╢▒░╙ª,`√▄▄████ ▌ª█████ █▄▀█ ▐████████▀ b░%╫ ▒  ╠&└▓[╢ ▓ ██      ')
print('     ████████████████████ ╚å▒┐▐█▌▄▀█████ ██▄▀██▌▐██▄▀ ████████▀.╢╫╫ÑM ▒`╡╞N┌▒└▒ ╫ ██      ')
print('         █████████████████ º@æ ██▐█▄████▐████ª█ ████  ██████  +Ñ▒Ñ╬╝  ▒ æ╒╝ ╚ ░ ▒ ▐█      ')
print('     ▄ ▓.\█████████████████  ▓▓ █ ███▄▀█▐█████  █████.█████ ╓▒░░░▒    ╝   ⌂ ╖╓  ª  █      ')
print('     █▌ █ ▐██████████████▀ ,-,└▓ ╛█████  ▀` ╖|  █ ▒▒  ▓▓ -≥▒Ñ░░▒╜ ,▌- ,║░an╫▓╣▒▒ß╖∩█      ')
print('     ███ █ ▀████████████▀ - ▐▓▌.╚▓╖╓╓╖[`▒▒░▒▒α ▒▒▒░  ▒▒╫╢─º ▄K² ┌██   ╙╢╝,▄▄╫Ñ╫`▄┐t█      ')
print('     ████ ▓ ██████████ -▓ τ▓█▓▓█▌ └╣║╫%L╘░▒▒ª▒▒░░⌐ ▓▀▒▒▒╖   -▄█████   Lⁿu▀╨▀▓ ╚ ▀Ö █      ')
print('     █████ ▌ ███████ -▓▓l▓² ▄▓██▓▓▓ `¥╫╫ ▒░▒▒∩▒  ┌╫▒▒▒▒▄▒▌ █████████ ª╙e╖▄▒U▒∞=▀ÑÑ,█      ')
print('     ██████ L █████ ▄▓▓▓▀      ▓▓▓██▓▓▄ ╛ª▒░▒╝  ▓▒╫Ñ▒▒▄▓▒▓ ███████████ └╖²Ñ└ ∞─² }╢█      ')
print('     ██████▌  ▐███ ▓▓▀M ▄████▌ ▓▓▓▓▓███▓█▄   ▄██▓╫▄▓█╫▀Ñ▓▒ ████████████ ; ╒>-╓ √** █      ')
print('     ███████▄  ▀█ ▓▓Ñ ,██████ ▐▓▓▓╫▄█████▓▓▓▒╫▓▀▄╫▀▀╫▌▒4▀▓ ▐███████████ Ñ▓└┘¿└   τ██      ')
print('     ████████▄   4▓▓  ███████ ▐▓▓▓▓╫▓▓▓▓╫▓▒▀╫▓██▓╣▒▒▒▒ÑÑ▒▒╕ ███████████. ª%╖`ºh  ███      ')
print('     █████████   ▀▓▌ ████████ ╠▓▓▓▓█▓▓▓▓▓▓▓▓▓▓▒▒╣Æ▒▓▒▒╫▌▀▒▀ ████████████▌`   ▄▄█████      ')
print('     ████████▌ ▄τ@  , ███████ ║▓▓▓▓▓▓▓▓▓▌▓╫▓@╫▀╫▓&╣▒╫▀▓▓▄▒▄ ▀████████████  █████████      ')
print('     █████████ ,  ┌ º ███████ ╟▓▓▓▓@▓▓▓▓▓▓▓▓Ñ╫@▒╫▓▀▓╫M▒  ╫▒ ▐███████████████████████      ')
print('     ██████████   2√  ███████ ╟█▀▀▓╫▓▓▓▓╫▓╫▓▓▓▓▓▒@▄╫╝▒▄ ▄  ╡ ███████████████████████      ')
print('     ████████████┐ =  ███████ [╫▓  ▓▄▓▓▓▓▓▓▀▀╫▓▀▓▒▀▒▒╫┘, █,  ███████████████████████      ')
print('     ██████████████   ███████L└▓┘  \▓▓▀ ▀  ╜Ñ▀╜ ▄  ╝Ñ╝┌▒. █▄  ██████████████████████      ')
print('     ███████████████ .`██████▌   █ ,▐▀ , ██▄   ████▄  ╟M╫ ▐█████████████████████████      ')
print('     ████████████████ ┐ ██████▄▄██ ╫.Æ ██████████████▌ ▌▒▄ █████████████████████████      ')
print('     ████████████████▌ , █████████ ▄▓@ ███████████████ ª▒Ü ▐▀███████████████████████      ')
print('     █████████████████▄   █▀███  . º╫╫ ███████████████▌ ╫▄ea@  █████████████████████      ')
print('     ██████████████████▄`L   █, ⁿ╙*¬º  ▐███████████████  ---──▄█████████████████████      ')
print('     ███████████████████▄ L ┐ ██████████████████████████████████████████████████████      ')
print('     ███████████████████▀  . - █████████████████████████████████████████████████████      ')
print('     ██████████████████   ⁿ÷   █████████████████████████████████████████████████████      ')
print('     ██████████████████████▄   █████████████████████████████████████████████████████      ')
print('     ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀²  ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀      ')
print('              ____    _   _   ____    _   _   _   _   _  __  _____   ____                 ')
print('             / ___|  | | | | |  _ \  | | | | | \ | | | |/ / | ____| |  _ \                ')
print('             \___ \  | |_| | | |_) | | | | | |  \| | |   /  |  _|   | |_) |               ')
print('              ___) | |  _  | |  _ <  | |_| | | |\  | | . \  | |___  |  _ <                ')
print('             |____/  |_| |_| |_| \_\  \___/  |_| \_| |_|\_\ |_____| |_| \_\               ')
print('                                                           p o w e r e d by               ')
print('                                                                          shrtco.de       ')
print('     ████████████████████████████████████████████████████████████████████████████████     ')
print('     ████████████████████████████████████████████████████████████████████████████████     ')
print('     ████████████████████████████████████████████████████████████████████████████████     ')
print('')
                                                              
BASE_URL = "https://api.shrtco.de/v2"

def shorten_url(url):
    endpoint = "/shorten"
    params = {"url": url}
    response = requests.get(BASE_URL + endpoint, params=params)
    data = response.json()
    return data

def get_link_info(code):
    endpoint = "/info"
    params = {"code": code}
    response = requests.get(BASE_URL + endpoint, params=params)
    data = response.json()
    return data

def main():
    parser = argparse.ArgumentParser(description="URL shortener CLI")
    subparsers = parser.add_subparsers(title="Commands", dest="command", required=True)

    shorten_parser = subparsers.add_parser("shorten", help="Shorten a URL")
    shorten_parser.add_argument("--url", required=True, help="URL to shorten")

    info_parser = subparsers.add_parser("info", help="Get information about a shortened URL")
    info_parser.add_argument("--code", required=True, help="Code of the shortened URL")

    args = parser.parse_args()

    if args.command == "shorten":
        response = shorten_url(args.url)
        if response["ok"]:
            result = response["result"]
            print("Shortened link:", result["short_link"])
            print("Original link:", result["original_link"])
        else:
            print("Shortening URL failed. Error:", response["error"])
    elif args.command == "info":
        response = get_link_info(args.code)
        if response["ok"]:
            result = response["result"]
            print("Original URL:", result["url"])
            print("Created:", result["created"])
        else:
            print("Getting link information failed. Error:", response["error"])

if __name__ == "__main__":
    main()
